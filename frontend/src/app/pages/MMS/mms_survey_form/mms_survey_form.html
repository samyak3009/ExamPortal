<style type="text/css">
.color_onhover:hover
{
background-color: green;
}
.option_below_div
{
width: 95%;
font-size: 14px;
padding: 0;
max-height: 35px;
}
.ans_btn
{
height: inherit;
padding: 6px;
}
ol>li
{
font-weight: bold;
}
ol>li>*
{
font-weight: normal;
}
.show_quesMark
{
visibility: hidden;
}
.ans_btn:hover .show_quesMark
{
visibility: visible;
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
margin: 0;
}
.ques_side_menu
{
padding: 0!important;
margin-bottom: 5px;
}
input[type=file]
{
margin: 0!important;
}
.nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus
{
background-color: /*#1199d3*/#5bc0de;
border-radius: 5px;
}
.nav-tabs.nav-justified > .active > a {
text-align: center;
font-size: 16px;
color: white!important;
}
.nav-justified > li > a, .nav-tabs.nav-justified > li > a
{
color: black;
font-weight: normal;
font-family: "Raleway", "Arial", sans-serif;
font-size: 14px;
}
.box_inset_shadow
{
-webkit-box-shadow: inset 0 0 15px #DEDEDE;
-moz-box-shadow: inset 0 0 15px #DEDEDE;
box-shadow: inset 0 0 15px #DEDEDE;
}
.btn.disabled, .btn[disabled], fieldset[disabled] .btn
{
cursor: not-allowed;
opacity: 0.95;
}
th
{
font-weight: bold;
}
@page
{
size: auto;   /* auto is the initial value */
margin: 8mm 3mm 5mm 3mm;
}
.textara_modify
{
width: 100%;
padding-top: 5px;
padding-bottom: 5px;
padding-left: 5px;
padding-right: 5px;
border: 1px solid #BDBDBD;
white-space: pre-line;
min-height: 100px;
}
.lined-paper
{
padding: 10px 5px 10px 70px !important;
}
.v_align
  {
    vertical-align: middle;
  }
.border_btm
{
border-bottom: 1px solid black;
}
.font_head
{
font-size: 14px;
font-weight: 600;
}
/*.fixedPos
{
position: fixed;
top:50px;
background-color: #5bc0de;
width: 100%;
color: white;
z-index: 999;
}*/
</style>
<div class="page page-forms pull-to-header">
    <ol class="breadcrumb bg-white">
        <li><a ui-sref="dashboard">Home</a></li>
        <li><a href="javascript:;">MMS</a></li>
        <li class="active">Add Internal Survey</li>
    </ol>
    <!-- class="tile-body lined-paper b-t" -->
    <form name="add_question" role="form" print-remove>
    <section class="tile" >
        <h3 class="alert alert-info heading">Add Internal Survey</h3>
        <div class="tile-body">
            <!-- ====================================== -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="bloom" class="control-label minotaur-label">S/F</label>
                            </div>
                            <div class="col-md-8">
                                <select class="form-control" id="sf" name="sf" ng-model="vm.faculty" ng-change="vm.getCourseDropdown_faculty()"  chosen="{width:'100%'}" required>
                                    <option value="" disabled>Choose One</option>
                                    <option value="student">Student</option>
                                    <option value="faculty">Faculty</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6" ng-if="vm.faculty=='faculty'">
                            <div class="col-md-4">
                                <label for="bloom" class="control-label minotaur-label">Course</label>
                            </div>
                            <div class="col-md-8">
                                <select class="form-control" id="course" name="course"   chosen="{width:'100%'}"  ng-options="x.course as x.course__value for x in vm.coursedropdown_faculty.course" ng-model="vm.course" ng-change="vm.getBranchDropdown();" required>
                                    <option value="" disabled>Choose One</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6" ng-if="vm.faculty=='student'">
                            <div class="col-md-4">
                                <label for="bloom" class="control-label minotaur-label">Course</label>
                            </div>
                            <div class="col-md-8">
                                <select class="form-control" id="course" name="course"   chosen="{width:'100%'}"  ng-options="x.course as x.course__value for x in vm.coursedropdown" ng-model="vm.course" ng-change="vm.getBranchDropdown();" required>
                                    <option value="" disabled>Choose One</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div ng-if="vm.faculty=='faculty'">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-4">
                                    <label for="branch" class="control-label minotaur-label">Branch</label>
                                </div>
                                <div class="col-md-8">
                                    <select   class="form-control" id="branch" name="branch"   chosen="{width:'100%'}" ng-options="x.section__sem_id__dept as x.section__sem_id__dept__dept__value for x in vm.branchdropdown" ng-model="vm.department" ng-change="vm.getCategoryDropdown(); vm.getFacultySurveyDropdown();" required>
                                        <option value="" disabled> Choose One</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-4">
                                    <label for="subject" class="control-label minotaur-label">Category</label>
                                </div>
                                <div class="col-md-8">
                                    <select   class="form-control" id="category" name="category" multiple ng-change="vm.category = vm.ALLfunction(vm.category,vm.categoryDropdown,'es');" chosen="{width:'100%'}" ng-options="x.es as x.ev for x in vm.categoryDropdown" ng-model="vm.category"  required>
                                        <!-- <option value="" disabled> Choose One</option> -->
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <div class="col-md-4">
                                    <label for="subject" class="control-label minotaur-label">Survey</label>
                                </div>
                                <div class="col-md-8">
                                    <select   class="form-control" id="survey" name="survey"   chosen="{width:'100%'}" ng-options="x.sno as x.value for x in vm.facultySurveyDropdown" ng-model="vm.facultySurvey"  required>
                                        <option value="" disabled> Choose One</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- ====================================== -->
                <div class="row" ng-if="vm.faculty=='student'">
                    <div class="col-md-12">
                        <!-- <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="bloom" class="control-label minotaur-label">Course</label>
                            </div>
                            <div class="col-md-8">
                                <select class="form-control" id="course" name="course"   chosen="{width:'100%'}"  ng-options="x.course as x.course__value for x in vm.coursedropdown" ng-model="vm.course" ng-change="vm.getBranchDropdown();" required>
                                    <option value="" disabled>Choose One</option>
                                </select>
                            </div>
                        </div> -->
                        <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="branch" class="control-label minotaur-label">Branch</label>
                            </div>
                            <div class="col-md-8">
                                <select   class="form-control" id="branch" name="branch"   chosen="{width:'100%'}" ng-options="x.section__sem_id__dept as x.section__sem_id__dept__dept__value for x in vm.branchdropdown" ng-model="vm.branch" ng-change="vm.get_sem(); vm.get_survey();" required>
                                    <option value="" disabled> Choose One</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="sem" class="control-label minotaur-label">Semester</label>
                            </div>
                            <div class="col-md-8">
                               <select   class="form-control" id="sem" name="sem"   chosen="{width:'100%'}" ng-options="x.section__sem_id as x.section__sem_id__sem for x in vm.semdropdown" ng-model="vm.sem" ng-change="vm.setSemValue()" required>
                                    <option value="" disabled> Choose One</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row" ng-if="vm.faculty=='student'">
                    <div class="col-md-12">
                        <!-- <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="sem" class="control-label minotaur-label">Semester</label>
                            </div>
                            <div class="col-md-8">
                               <select   class="form-control" id="sem" name="sem"   chosen="{width:'100%'}" ng-options="x.section__sem_id as x.section__sem_id__sem for x in vm.semdropdown" ng-model="vm.sem" ng-change="vm.setSemValue()" required>
                                    <option value="" disabled> Choose One</option>
                                </select>
                            </div>
                        </div> -->
                        <div class="col-md-6">
                            <div class="col-md-4">
                                <label for="subject" class="control-label minotaur-label">Survey</label>
                            </div>
                            <div class="col-md-8">
                                <select   class="form-control" id="Survey" name="Survey"   chosen="{width:'100%'}" ng-options="x.sno as x.value for x in vm.surveydropdown" ng-model="vm.survey_selected"  required>
                                    <option value="" disabled> Choose One</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <br>

                <div class="row">
                    <div class="col-xs-12">
                        <center>
                        <button class="btn btn-primary" ng-if="vm.faculty=='student'" ng-disabled="add_question.$invalid" ng-click="vm.viewPervious();">Add Survey</button>
                        <button class="btn btn-primary" ng-if="vm.faculty=='faculty'" ng-click="vm.nextStep()">Add Survey</button>
                        </center>
                    </div>
                </div>
        </div>
        <button ng-if="vm.faculty=='faculty'" style="margin-left: 20px;" uib-tooltip="View Previous Survey" class="btn btn-primary btn-border btn-rounded-20 btn-ef btn-ef-4 btn-ef-4b mb-10" ng-click="vm.hideviewPrevious(); vm.poConnection()"> View Previous <i class="fa fa-arrow-down"></i></button>
    </section>
</form>
    <!-- =========================indirect faculty================================== -->
        <section ng-if="vm.faculty=='faculty'">
            <div ng-include src="'app/pages/MMS/mms_survey_form/createIndirectForm/createForm1.html'"></div>
        </section>
    <!-- ============================================================================ -->
    <section ng-if="vm.faculty=='student'">
        <div class="tile " style="padding-right: 5px; padding-left: 5px;"  ng-if="vm.previous == true"  >
            <h3 class="alert alert-info heading">Survey Question Paper</h3>'
            <button print-remove class="btn btn-link" ng-click="vm.exportToExcel('Survey_list','Survey Paper')">
                <span class="glyphicon glyphicon-share"></span> Export to Excel
            </button>
            <button print-remove print-btn class="btn btn-link">
                <span class="glyphicon glyphicon-share"></span> Print Table
            </button>
            <form name=" submit_question " >
            <div class="tile-body" style="padding: 0;" print-section>
                <div class="text-center"><span style="font-size: 22px; font-weight: bolder;">KIET Group of Institutions</span></div>
                <div style="border: 1px solid black"></div>
                <div class="row" style="margin-top: 10px; margin-bottom: 15px;">
                    <div class="text-center font_head"><span class="border_btm">{{vm.course_name}}</span></div>
                    <div class="text-center font_head"><span class="border_btm">{{vm.branch_name}}, {{vm.sem_name}}<sup>{{semSuperScript[vm.sem_name]}}</sup>&nbsp;Semester</span></div>
                    <div class="text-center font_head">
                        <span class="border_btm">{{vm.surveyvalue}} ,{{vm.session_name}}
                            <!-- <span ng-show="vm.sem_name % 2 == 0">Even</span>
                            <span ng-show="vm.sem_name % 2 != 0">Odd</span> -->
                        Semester</span></div>
                </div>
            <table ng-if=" vm.view_prv.length !=0  " class="table table-bordered table-striped table-responsive" id="Survey_list"  style="padding-right: 5px; padding-left: 5px;"  >
        <thead>
          <tr class="table-bordered">
            <th class="text-center" colspan="2" >Q.No</th>
            <th class="text-center">Questions</th>
            <th class="text-center" colspan="2">PO</th>
            <th ng-if =" vm.valid_data == true " class="text-center" print-remove>Edit</th>
          </tr>
        </thead>
        <tbody >
          <tr class="table-bordered" ng-repeat=" x in vm.view_prv track by $index">
            <th colspan="2" class="text-center" style="width: 20px;" >{{$index +1 }}</th>
            <td class="v_align " >
                <div ng-if=" x['edited_by_pre'] == false;">{{x['description']}}</div>
                <div  ng-if=" x['edited_by_pre'] == false;" style="padding-left: 60px;" >
                    <div  ng-repeat = "y in vm.img_link " style="padding-left: 60px;" >
                        <br>
                        <div ng-if=" y.id == x.unique_key " >
                            <img  src="{{y.link}}" alt="servey_image" style="max-width:250px; max-height: 250px;">
                        </div>
                    </div>
                </div>
                <div ng-if=" x['edited_by_pre'] != false;" >
                    <div class="col-md-10 col-xs-12">
                        <textarea class="tile-body lined-paper b-t" rows="3" style="width: 100%" placeholder="Question Here..." ng-required="true" ng-model="x['description']" >
                        </textarea>
                    </div>
                    <div class="col-md-2 col-xs-12" style="padding: 15px 0 0 0 ;">
                        <div class="col-xs-12 ques_side_menu" >
                        <input type="file" class="filestyle" file-model="x['question_img']" name="{{$index}}" filepreview="filepreview" filestyle="{buttonText: 'Picture',iconName: 'fa fa-file-image-o'}"  id="" onchange="angular.element(this).scope().upload_question(this.files,this.id,'mms_survey','mms_survey',name)">
                        </div>
                        <div class="col-xs-12 ques_side_menu">
                         <select name="course" class="form-control" ng-model="x['po_id']" multiple chosen="{width:'100%'}" ng-required="true"; ng-change="j['survey_id'] = vm.survey_selected ;x['po_id']=vm.selectAllPO(x['po_id'])">
                             <option value="" disabled>Choose PO </option>
                            <option ng-value="x.id" ng-repeat="x in vm.po_list">{{x.po_level_abbr}}</option>
                        </select>
                        </div>
                    </div>
                     <center><button ng-if="x.new != true"  type="button" class="btn btn-primary btn-rounded btn-ef btn-ef-5 btn-ef-5b mb-10" ng-click="vm.update($index)"><i class="fa fa-send" style="font-size:14px; margin-top: 3px;"></i>
                    <span>Update Question</span></button></center>
                </div>
            </td>
            <td colspan="2">
                <div style="padding: 0;" ng-if=" x['edited_by_pre'] == false;" ng-repeat= " y in x['po_id__description'] track by $index" >
                    <span uib-tooltip="{{y['po_id__description']}}"><center>{{y['po']}}, &nbsp;</center></span>
                </div>
                <div >
                    <center>
                        <span>

                        </span>
                    </center>
                </div>
            </td>
            <td ng-if =" vm.valid_data == true " class="text-center v_align" data-title="'Actions'" style="cursor: pointer; width: 50px;" print-remove>
                <span>
                    <a ng-if=" x['edited_by_pre'] == false;" style="color: green;" ng-click="vm.setDataForUpdate($index);">
                        <i class="fa fa-pencil-square-o btn-space"></i>
                    </a>
                    <a ng-if=" x['edited_by_pre'] != false && (($index == vm.view_prv.length -1) && x['unique_key'])  " style="color: #989ba0;" uib-tooltip=" Cancel " ng-click="vm.to_default($index);"  >
                        <i class="fa fa-times"></i>
                    </a>
                </span>
                <span>
                    <a style="color: red;" uib-tooltip="Delete" ng-click="vm.delete_Question_from_row(x['po_id__description'],$index);">
                        <i class="fa fa-trash-o"></i>
                    </a>
                </span>
            </td>
          </tr>
        </tbody>
      </table>
      <div ng-if = "vm.view_prv.length == 0 ">
            <section>
             <br>
                <div  style="font-size: 20px;">
                 <center>
                     <b style="color: #a56d79"> No question is added in  Question paper</b>
                </center>
                </div>
                <br>
            </section>
            <br>
        </div>
        <div  class="row" print-remove >
            <div  ng-if=" vm.view_prv.length !=0  " class="col-xs-1" style="padding-left: 40px;">
                 <button   type="button" class="btn btn-lightred mb-10"  ng-click="vm.clickAll();" ng-disabled="submit_question.$invalid  " uib-tooltip="Delete question paper" style="font-size:12px; margin-top: 5px" >Delete paper</button>
            </div>
            <div  ng-if=" vm.view_prv.length !=0  " class="col-xs-9" style="padding-right: 0;">
                <center>
                    <button ng-if="vm.new == true && vm.arrfornewquestion != 0 " type="button" class="btn btn-primary btn-rounded btn-ef btn-ef-5 btn-ef-5b mb-10" ng-click="vm.finalSubmit()" ng-disabled=" submit_question.$invalid  "><i class="fa fa-send" style="font-size:12px; margin-top: 5px;"></i>
                    <span>Submit Question</span>
                    </button>
                </center>
            </div>
                <div  class="col-xs-1">
                    <button class="btn btn-primary btn-sm btn-ef btn-ef-5 btn-ef-5b mb-10" ng-click="vm.add_Question();" ng-disabled="submit_question.$invalid " ><i class="fa fa-plus" style="font-size:12px; margin-top: 5px"></i>
                        <span>Add Question</span>
                    </button>
                </div>
        </div>
        </div>
        </form>
        </div>

    </section>

<div>
